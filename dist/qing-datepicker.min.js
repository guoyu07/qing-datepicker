/* qing-datepicker v1.0.1 | (c) Mycolorway Design | MIT License */
!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("jquery"),require("moment"),require("qing-module")):t.QingDatepicker=e(t.jQuery,t.moment,t.QingModule)}(this,function(t,e,r){var n=require=function t(e,r,n){function i(s,p){if(!r[s]){if(!e[s]){var c="function"==typeof require&&require;if(!p&&c)return c(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var u=r[s]={exports:{}};e[s][0].call(u.exports,function(t){var r=e[s][1][t];return i(r?r:t)},u,u.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,n,i){var o,s=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;o=function(e){function r(e){r.__super__.constructor.apply(this,arguments),this.opts=t.extend({},r.opts,this.opts),this.wrapper=t(this.opts.wrapper),this.active=!1,this._render(),this._bind()}return s(r,e),r.opts={wrapper:null,placeholder:""},r.prototype._render=function(){return this.el=t('<input type="text" class="text-field" readonly>').attr("placeholder",this.opts.placeholder).appendTo(this.wrapper)},r.prototype._bind=function(){return this.el.on("click",function(t){return function(e){return t.trigger("click")}}(this)),this.el.on("input",function(t){return function(e){return t._inputTimer&&(clearTimeout(t._inputTimer),t._inputTimer=null),t._inputTimer=setTimeout(function(){return t.trigger("change",[t.el.val()])},400)}}(this))},r.prototype.setValue=function(t){return this.el.val(t),t},r.prototype.getValue=function(){return this.el.val()},r.prototype.setActive=function(t){return this.active=t,this.el.toggleClass("active",t),this.active},r.prototype.destroy=function(){return this.el.remove()},r}(r),n.exports=o},{}],2:[function(n,i,o){var s,p,c,a,u=function(t,e){function r(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;s=n("./select-views/date-select.coffee"),p=n("./select-views/month-select.coffee"),a=n("./select-views/year-select.coffee"),c=function(r){function n(e){n.__super__.constructor.apply(this,arguments),this.opts=t.extend({},n.opts,this.opts),this.wrapper=t(this.opts.wrapper),this.active=!1,this._render(),this.dateSelect=new s({wrapper:this.el,prevArrow:this.opts.prevArrow,nextArrow:this.opts.nextArrow}),this.monthSelect=new p({wrapper:this.el,prevArrow:this.opts.prevArrow,nextArrow:this.opts.nextArrow}),this.yearSelect=new a({wrapper:this.el,prevArrow:this.opts.prevArrow,nextArrow:this.opts.nextArrow,locales:this.opts.locales}),this._bind()}return u(n,r),n.opts={wrapper:null,prevArrow:"",nextArrow:"",locales:null},n.prototype._render=function(){return this.el=t('<div class="popover"></div>').appendTo(this.wrapper)},n.prototype._bind=function(){return this.dateSelect.on("yearClick",function(t){return function(e,r){return t.yearSelect.setYear(r),t.setSelectView(t.yearSelect)}}(this)),this.dateSelect.on("monthClick",function(t){return function(e,r){return t.monthSelect.setMonth(r),t.setSelectView(t.monthSelect)}}(this)),this.dateSelect.on("select",function(t){return function(e,r){return t.date=r,t.trigger("select",[t.date.clone()])}}(this)),this.monthSelect.on("yearClick",function(t){return function(e,r){return t.yearSelect.setYear(r),t.setSelectView(t.yearSelect)}}(this)),this.monthSelect.on("select",function(t){return function(e,r){return t.date.set({year:r.year(),month:r.month()}),t.dateSelect.setMonth(r),t.setSelectView(t.dateSelect)}}(this)),this.yearSelect.on("select",function(t){return function(e,r){return t.monthSelect.setYear(r),t.date.year(r),t.setSelectView(t.monthSelect)}}(this))},n.prototype.setSelectView=function(t){if(t!==this.selectView)return this.selectView&&this.selectView.setActive(!1),t.setActive(!0),this.selectView=t,this.selectView},n.prototype.setDate=function(t){return this.date=e(t),this.dateSelect.setDate(this.date.clone()),this.setSelectView(this.dateSelect),this.date},n.prototype.setActive=function(t){return this.active=t,this.el.toggleClass("active",t),this.active?this.trigger("show"):this.trigger("hide"),this.active},n.prototype.setPosition=function(t){return this.el.css({top:t.top,left:t.left||0})},n}(r),i.exports=c},{"./select-views/date-select.coffee":3,"./select-views/month-select.coffee":4,"./select-views/year-select.coffee":6}],3:[function(r,n,i){var o,s,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=r("./select-view.coffee"),o=function(r){function n(t){n.__super__.constructor.apply(this,arguments),this.date=e().startOf("day"),this.month=e().startOf("month")}return p(n,r),n.prototype._render=function(){return n.__super__._render.apply(this,arguments),t('<a href="javascript:;" class="link-year"></a>\n<a href="javascript:;" class="link-month"></a>').appendTo(this.el.find(".title")),this.el.addClass("date-select")},n.prototype._renderGrid=function(){return this.el.find(".link-year").text(this.month.format("YYYY")),this.el.find(".link-month").text(this.month.format("MMM")),this.grid.empty(),this._renderGridHead(),this._renderGridBody(),this.grid},n.prototype._renderGridHead=function(){var r;return r=t('<div class="weekdays">'),t.each(e.weekdaysMin(),function(e){return function(e,n){return t("<span>",{class:"weekday",text:n}).appendTo(r)}}(this)),this.grid.prepend(r)},n.prototype._renderGridBody=function(){var r,n,i,o,s;for(r=t('<div class="days">'),i=this.month.clone().startOf("week"),o=this.month.clone().endOf("month").endOf("week");i.isSameOrBefore(o);)n=t("<a>",{href:"javascript:;",class:"grid-item link-day","data-date":i.format("YYYY-MM-DD"),text:i.format("D")}),i.clone().startOf("month").isSame(this.month)||n.addClass("minor"),i.isSame(this.date)&&n.addClass("selected"),i.isSame(e().startOf("day"))&&n.addClass("current"),s=["sun","mon","tue","wed","thu","fri","sat"],n.addClass(s[i.day()]).appendTo(r),i.add(1,"days");return this.grid.append(r),this.grid},n.prototype._bind=function(){return n.__super__._bind.apply(this,arguments),this.el.on("click",".link-prev",function(t){return function(e){return t.month.subtract(1,"months"),t._renderGrid()}}(this)),this.el.on("click",".link-next",function(t){return function(e){return t.month.add(1,"months"),t._renderGrid()}}(this)),this.el.on("click",".link-year",function(t){return function(e){return t.trigger("yearClick",[t.month.year()])}}(this)),this.el.on("click",".link-month",function(t){return function(e){return t.trigger("monthClick",[t.month.clone()])}}(this)),this.el.on("click",".link-day",function(r){return function(n){var i,o;return i=t(n.currentTarget),o=e(i.data("date")),r.trigger("select",[o])}}(this))},n.prototype.setDate=function(t){if(e.isMoment(t)&&t.isValid())return this.date=t,this.month=t.clone().startOf("month"),this._renderGrid(),this.date},n.prototype.setMonth=function(t){if(e.isMoment(t)&&t.isValid())return this.month=t,this._renderGrid(),this.month},n}(s),n.exports=o},{"./select-view.coffee":5}],4:[function(r,n,i){var o,s,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;s=r("./select-view.coffee"),o=function(r){function n(t){n.__super__.constructor.apply(this,arguments),this.month=e().startOf("month"),this.year=e().year()}return p(n,r),n.prototype._render=function(){return n.__super__._render.apply(this,arguments),t('<a href="javascript:;" class="link-year"></a>').appendTo(this.el.find(".title")),this.el.addClass("month-select")},n.prototype._renderGrid=function(){var r,n,i,o;for(this.el.find(".link-year").text(this.year),this.grid.empty(),o=e([this.year,0,1]),n=i=0;i<=11;n=++i)n>0&&(o=o.add(1,"months")),r=t("<a>",{href:"javascript:;",class:"grid-item link-month","data-month":o.format("YYYY-MM"),text:o.format("MMM")}),o.isSame(e().startOf("month"))&&r.addClass("current"),o.isSame(this.month)&&r.addClass("selected"),r.appendTo(this.grid);return this.grid},n.prototype._bind=function(){return n.__super__._bind.apply(this,arguments),this.el.on("click",".link-prev",function(t){return function(e){return t.year-=1,t._renderGrid()}}(this)),this.el.on("click",".link-next",function(t){return function(e){return t.year+=1,t._renderGrid()}}(this)),this.el.on("click",".link-year",function(t){return function(e){return t.trigger("yearClick",[t.year])}}(this)),this.el.on("click",".link-month",function(r){return function(n){var i,o;return i=t(n.currentTarget),o=e(i.data("month")),r.trigger("select",[o])}}(this))},n.prototype.setMonth=function(t){if(e.isMoment(t)&&t.isValid())return this.month=t,this.year=t.year(),this._renderGrid(),this.month},n.prototype.setYear=function(t){return this.year=t,this._renderGrid(),this.year},n}(s),n.exports=o},{"./select-view.coffee":5}],5:[function(e,n,i){var o,s=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;o=function(e){function r(e){r.__super__.constructor.apply(this,arguments),this.opts=t.extend({},r.opts,this.opts),this.wrapper=t(this.opts.wrapper),this.active=!1,this._render(),this._bind()}return s(r,e),r.opts={wrapper:null,prevArrow:null,nextArrow:null},r.prototype._render=function(){return this.el=t('<div class="select-view">\n  <div class="top-bar">\n    <a href="javascript:;" class="link-prev">'+this.opts.prevArrow+'</a>\n    <span class="title">\n    </span>\n    <a href="javascript:;" class="link-next">'+this.opts.nextArrow+'</a>\n  </div>\n  <div class="select-grid"></div>\n</div>').appendTo(this.wrapper),this.grid=this.el.find(".select-grid"),this.el},r.prototype._renderGrid=function(){},r.prototype._bind=function(){},r.prototype.setActive=function(t){return this.active=t,this.el.toggleClass("active",t),this.active},r}(r),n.exports=o},{}],6:[function(r,n,i){var o,s,p=function(t,e){function r(){this.constructor=t}for(var n in e)c.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=r("./select-view.coffee"),s=function(r){function n(r){n.__super__.constructor.apply(this,arguments),this.opts=t.extend({},n.opts,this.opts),this.year=e().year(),this.currentYear=this.year}return p(n,r),n.opts={locales:null},n.prototype._render=function(){return n.__super__._render.apply(this,arguments),this.el.find(".title").text(this.opts.locales.selectYear),this.el.addClass("year-select")},n.prototype._renderGrid=function(){var r,n,i,o,s,p,c;for(this.grid.empty(),p=this.year-4,n=this.year+4,c=i=o=p,s=n;o<=s?i<=s:i>=s;c=o<=s?++i:--i)r=t("<a>",{href:"javascript:;",class:"grid-item link-year","data-year":c,text:c}),c===e().year()&&r.addClass("current"),c===this.currentYear&&r.addClass("selected"),r.appendTo(this.grid);return this.grid},n.prototype._bind=function(){return n.__super__._bind.apply(this,arguments),this.el.on("click",".link-prev",function(t){return function(e){return t.year-=9,t._renderGrid()}}(this)),this.el.on("click",".link-next",function(t){return function(e){return t.year+=9,t._renderGrid()}}(this)),this.el.on("click",".link-year",function(e){return function(r){var n,i;return n=t(r.currentTarget),i=n.data("year"),e.trigger("select",[i])}}(this))},n.prototype.setYear=function(t){return this.year=t,this.currentYear=t,this._renderGrid(),this.year},n}(o),n.exports=s},{"./select-view.coffee":5}],"qing-datepicker":[function(n,i,o){var s,p,c,a=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;s=n("./input.coffee"),p=n("./popover.coffee"),c=function(r){function n(r){if(n.__super__.constructor.apply(this,arguments),this.el=t(this.opts.el),!(this.el.length>0))throw new Error("QingDatepicker: option el is required");this.opts=t.extend({},n.opts,this.opts),this.inputFormats=this.opts.inputFormats,this.locales=this.opts.locales||n.locales,this.id=++n.count,this._render(),this._initChildComponents(),this._bind(),this.setDate(e(this.el.val(),this.opts.format))}return a(n,r),n.opts={el:null,placeholder:"",format:"YYYY-MM-DD",displayFormat:"LL",inputFormats:["YYYY-M-D","M/D/YY","YYYY年M月D日","YYYY.M.D","YYYY/M/D"],prevArrow:"&lt;",nextArrow:"&gt;",locales:{selectYear:"Select Year"}},n.count=0,n.prototype._render=function(){return this.wrapper=t('<div class="qing-datepicker"></div>').data("qingDatepicker",this).insertBefore(this.el).append(this.el),this.el.hide().data("qingDatepicker",this)},n.prototype._initChildComponents=function(){return this.input=new s({wrapper:this.wrapper,placeholder:this.opts.placeholder||this.el.attr("placeholder")||""}),this.popover=new p({wrapper:this.wrapper,prevArrow:this.opts.prevArrow,nextArrow:this.opts.nextArrow,locales:this.locales})},n.prototype._bind=function(){return t(document).on("click.qing-datepicker-"+this.id,function(e){return function(r){if(!t.contains(e.wrapper[0],r.target))return e.popover.setActive(!1)}}(this)),this.input.on("click",function(t){return function(){return t.popover.active?(t.popover.setActive(!1),t.input.setActive(!1)):(t.popover.setDate(t.date),t.popover.setActive(!0),t.input.setActive(!0))}}(this)),this.input.on("change",function(t){return function(r,n){var i;if(i=e(n,t.inputFormats,!0),i.isValid())return t.setDate(i),t.popover.setDate(t.date)}}(this)),this.popover.on("show",function(t){return function(e){return t.popover.setPosition({top:t.input.el.outerHeight()+2})}}(this)),this.popover.on("select",function(t){return function(e,r){return t.setDate(r),t.popover.setActive(!1),t.input.setActive(!1)}}(this))},n.prototype.setDate=function(t){return e.isMoment(t)&&t.isValid()&&!t.isSame(this.date)&&(this.input.setValue(t.format(this.opts.displayFormat)),this.el.val(t.format(this.opts.format)),this.date=t,this.trigger("change",[this.date.clone()])),t},n.prototype.getDate=function(){return this.date},n.prototype.destroy=function(){return this.el.insertAfter(this.wrapper).show().removeData("qingDatepicker"),this.wrapper.remove(),t(document).off(".qing-datepicker-"+this.id)},n}(r),i.exports=c},{"./input.coffee":1,"./popover.coffee":2}]},{},[]);return n("qing-datepicker")});